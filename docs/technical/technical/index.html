<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/mAtches/blog/rss.xml" title="mAtches Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/mAtches/blog/atom.xml" title="mAtches Blog Atom Feed"><title data-react-helmet="true">Technical Documentation | mAtches</title><meta data-react-helmet="true" property="og:url" content="https://pepfar-datim.github.io/mAtches/docs/technical/technical"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Technical Documentation | mAtches"><meta data-react-helmet="true" name="description" content="Code"><meta data-react-helmet="true" property="og:description" content="Code"><link data-react-helmet="true" rel="shortcut icon" href="/mAtches/img/match_color.png"><link data-react-helmet="true" rel="canonical" href="https://pepfar-datim.github.io/mAtches/docs/technical/technical"><link data-react-helmet="true" rel="alternate" href="https://pepfar-datim.github.io/mAtches/docs/technical/technical" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pepfar-datim.github.io/mAtches/docs/technical/technical" hreflang="x-default"><link rel="stylesheet" href="/mAtches/assets/css/styles.14ff55e5.css">
<link rel="preload" href="/mAtches/assets/js/styles.539ab3c5.js" as="script">
<link rel="preload" href="/mAtches/assets/js/runtime~main.7be9e43c.js" as="script">
<link rel="preload" href="/mAtches/assets/js/main.0f99c6a8.js" as="script">
<link rel="preload" href="/mAtches/assets/js/1.d7f83bae.js" as="script">
<link rel="preload" href="/mAtches/assets/js/2.477cf303.js" as="script">
<link rel="preload" href="/mAtches/assets/js/23.e8fccdf3.js" as="script">
<link rel="preload" href="/mAtches/assets/js/25.e679077c.js" as="script">
<link rel="preload" href="/mAtches/assets/js/935f2afb.7953df72.js" as="script">
<link rel="preload" href="/mAtches/assets/js/17896441.2d27d597.js" as="script">
<link rel="preload" href="/mAtches/assets/js/664e4825.16939eeb.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mAtches/"><img src="/mAtches/img/match_color.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mAtches/img/match_color.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">mAtches Documentation</strong></a><a class="navbar__item navbar__link" href="/mAtches/docs/overview/overview">Overview</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" type="doc" activesidebarclassname="navbar__link--active" href="/mAtches/docs/technical/technical-architecture">Technical</a></li><li><a class="dropdown__link" type="doc" activesidebarclassname="navbar__link--active" href="/mAtches/docs/end_user/endUser-dashboard">End User</a></li><li><a class="dropdown__link" type="doc" activesidebarclassname="navbar__link--active" href="/mAtches/docs/implementation/implementation-deployment">Implementation</a></li></ul></div><a href="https://test.ohie.datim.org/mAtches" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Demo</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/pepfar-datim/mAtches" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/mAtches/"><img src="/mAtches/img/match_color.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/mAtches/img/match_color.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">mAtches Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/mAtches/docs/overview/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" type="doc" activesidebarclassname="navbar__link--active" href="/mAtches/docs/technical/technical-architecture">Technical</a></li><li class="menu__list-item"><a class="menu__link" type="doc" activesidebarclassname="navbar__link--active" href="/mAtches/docs/end_user/endUser-dashboard">End User</a></li><li class="menu__list-item"><a class="menu__link" type="doc" activesidebarclassname="navbar__link--active" href="/mAtches/docs/implementation/implementation-deployment">Implementation</a></li></ul></li><li class="menu__list-item"><a href="https://test.ohie.datim.org/mAtches" target="_blank" rel="noopener noreferrer" class="menu__link">Demo</a></li><li class="menu__list-item"><a href="https://github.com/pepfar-datim/mAtches" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Technical Documentation</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="code"></a>Code<a class="hash-link" href="#code" title="Direct link to heading">#</a></h2><p>mAtches is an open-source project. Our repo is avaialable <a href="https://github.com/pepfar-datim/mAtches" target="_blank" rel="noopener noreferrer">here</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="architecture-summary"></a>Architecture Summary<a class="hash-link" href="#architecture-summary" title="Direct link to heading">#</a></h2><p>mAtches is written in JavaScript and currently uses a React-based front end and an Express.js back end. File System is used for internal persistency of user maps as an interim solution. mAtches uses a REST API for communication between the front and back end. mAtches is currently using Node LTS v14.16.0 (active LTS version as of March 2021). If working with mAtches locally, nvm is recommended for node version management. </p><p>mAtches also interacts with a FHIR Server which stores relevant FHIR Questionnaires and with <a href="https://www.openconceptlab.org/" target="_blank" rel="noopener noreferrer">Open Concept Lab</a> (OCL) which is used to store finalized maps and make them accessible to downstream processes.</p><p>The current setup of the interaction between locations and resources can be summarized with the below simplified sequence diagram:</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="app-resources"></a>App Resources<a class="hash-link" href="#app-resources" title="Direct link to heading">#</a></h2><p>mAtches uses two main resources: questionnaires and maps.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="questionnaires"></a>Questionnaires<a class="hash-link" href="#questionnaires" title="Direct link to heading">#</a></h3><p>Questionnaires are FHIR Questionnaires and define data requirements for the data that is being collected</p><p>Where data is expected to be restricted to specific values, a FHIR ValueSet is used and is referenced from the relevant Questionnaire</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="maps"></a>Maps<a class="hash-link" href="#maps" title="Direct link to heading">#</a></h3><p>Maps are mAtches&#x27; proprietary instructions for how a user/organization’s proprietary data can be mapped to a specific Questionnaire. Maps allow you to map</p><p>Paths to individual Questionnaire Items (in current iteration, mAtches only accepts CSV, so the path is a header) (e.g. look in column with header ‘DOB’ to get data for Questionnaire Item ‘Date of Birth’)
Constant values to individual Questionnaire items (e.g. ‘ABC123’ is the ‘Facility ID’ for all data values being submitted by use of this map)
Proprietary definitions to expected values from a ValueSet (e.g. ValueSet expects ‘Female’, but proprietary data uses ‘F’)</p><p>More detail on these resources is available (TO MOVE) <a href="https://github.com/pepfar-datim/mAtches/wiki/Explanation-of-mAtches-Mapping" target="_blank" rel="noopener noreferrer">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="front-end"></a>Front end<a class="hash-link" href="#front-end" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="architecture"></a>Architecture<a class="hash-link" href="#architecture" title="Direct link to heading">#</a></h3><p>mAtches uses the React library to implement the front end. Front end currently uses React state for in-app state management. Front end does not cache any values in local or session storage given the limited amount of data being used in a given session.</p><p>Additional dependencies can be found in (package.json)[https://github.com/pepfar-datim/mAtches/blob/master/package.json] file. mAtches makes use of Material-UI library for UI components and uses material-table for displaying list of tables on dashboard. The current UI is relatively lightweight given the proof-of-concept nature of the project.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="uiux"></a>UI/UX<a class="hash-link" href="#uiux" title="Direct link to heading">#</a></h3><p>There are two main views for a user to interact </p><p>A dashboard/main page where users can see list of current maps and add new maps for available questionnaires:</p><p>An Individual Map Edit page where users create/edit their mappings:</p><p>mAtches is intended to be accessible to users with limited technical expertise and as such implements visual messaging through a variety of approaches including warning messages, color coding, and tooltips to provide additional explanation. As a proof-of-concept project, design principles have not been developed, nor have accessibility guidelines been followed.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="back-end"></a>Back end<a class="hash-link" href="#back-end" title="Direct link to heading">#</a></h2><p>The mAtches back end is written in Express. The back-end implements endpoints in line with REST API principles.</p><p>The back end’s entry point provides an overview of available api routes: <a href="https://github.com/pepfar-datim/mAtches/blob/master/server/server.js" target="_blank" rel="noopener noreferrer">server.js</a></p><p>Here is an overview of available api/endpoints and supported requests</p><table><thead><tr><th>Endpoint</th><th>Supported Requests</th><th>Purpose</th></tr></thead><tbody><tr><td>api/questionnaires</td><td>GET</td><td>Get all questionnaires</td></tr><tr><td>api/questionnaires/:id</td><td>GET</td><td>Get specific questionnaire</td></tr><tr><td>api/maps</td><td>GET, POST, PUT</td><td>Get all maps, add or update a map</td></tr><tr><td>api/maps/:id</td><td>GET, DELETE</td><td>Get/Delete specific map</td></tr><tr><td>api/maps/names/:name</td><td>GET</td><td>Check if map name is in use</td></tr><tr><td>api/about</td><td>GET</td><td>Get basic information on mAtches (including version number and build date)</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="persistency"></a>Persistency<a class="hash-link" href="#persistency" title="Direct link to heading">#</a></h2><p>Persistency of maps is implemented internally (using File System) and externally by sending map to OCL (see also Architecture Summary section above)</p><p>Internal persistency is necessary so long as OCL cannot accept an incomplete map. An incomplete map may be one for which Questionnaire Items are not mapped, or  where ValueSet mappings are not provided.</p><p>File System persistency for maps uses one file that provides an overall summary of available maps and individual files for each map. For more details on map format, see App Resources section above.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="user-management--authentication"></a>User Management / Authentication<a class="hash-link" href="#user-management--authentication" title="Direct link to heading">#</a></h2><p>User Management requirements are under development. We plan to use <a href="https://www.keycloak.org/" target="_blank" rel="noopener noreferrer">Keycloak</a> for user authorization and are evaluating its ability to meet requirements for user management/authentication. </p><p>In the current proof-of-concept test stage, the app is not being used with any real data. As such, sensitive data should not be processed in the current version of the app.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="deployment"></a>Deployment<a class="hash-link" href="#deployment" title="Direct link to heading">#</a></h2><p>See Implementation documentation for details on deploying mAtches.</p><p>For instructions on how to run the app locally, please see the repo&#x27;s <a href="https://github.com/pepfar-datim/mAtches" target="_blank" rel="noopener noreferrer">README</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/pepfar-datim/mAtches/edit/master/documentation/docs/technical/technical.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#code" class="table-of-contents__link">Code</a></li><li><a href="#architecture-summary" class="table-of-contents__link">Architecture Summary</a></li><li><a href="#app-resources" class="table-of-contents__link">App Resources</a><ul><li><a href="#questionnaires" class="table-of-contents__link">Questionnaires</a></li><li><a href="#maps" class="table-of-contents__link">Maps</a></li></ul></li><li><a href="#front-end" class="table-of-contents__link">Front end</a><ul><li><a href="#architecture" class="table-of-contents__link">Architecture</a></li><li><a href="#uiux" class="table-of-contents__link">UI/UX</a></li></ul></li><li><a href="#back-end" class="table-of-contents__link">Back end</a></li><li><a href="#persistency" class="table-of-contents__link">Persistency</a></li><li><a href="#user-management--authentication" class="table-of-contents__link">User Management / Authentication</a></li><li><a href="#deployment" class="table-of-contents__link">Deployment</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/mAtches/docs/technical/technical-architecture">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://ohie.org/duc/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Use Community</a></li><li class="footer__item"><a href="https://ohie.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OpenHIE</a></li><li class="footer__item"><a href="https://www.state.gov/pepfar/" target="_blank" rel="noopener noreferrer" class="footer__link-item">PEPFAR</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/pepfar-datim/mAtches" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 PEPFAR.</div></div></div></footer></div>
<script src="/mAtches/assets/js/styles.539ab3c5.js"></script>
<script src="/mAtches/assets/js/runtime~main.7be9e43c.js"></script>
<script src="/mAtches/assets/js/main.0f99c6a8.js"></script>
<script src="/mAtches/assets/js/1.d7f83bae.js"></script>
<script src="/mAtches/assets/js/2.477cf303.js"></script>
<script src="/mAtches/assets/js/23.e8fccdf3.js"></script>
<script src="/mAtches/assets/js/25.e679077c.js"></script>
<script src="/mAtches/assets/js/935f2afb.7953df72.js"></script>
<script src="/mAtches/assets/js/17896441.2d27d597.js"></script>
<script src="/mAtches/assets/js/664e4825.16939eeb.js"></script>
</body>
</html>